<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Firebase Auth Demo</title>
  
  <!-- Firebase Auth CSS -->
  <link rel="stylesheet" href="./firebase-auth.css">
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    .demo-header {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      padding: 20px 40px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    .demo-header h1 {
      color: white;
      font-size: 24px;
    }

    .demo-content {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 40px;
    }

    .demo-card {
      background: white;
      border-radius: 20px;
      padding: 40px;
      max-width: 600px;
      width: 100%;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    }

    .demo-card h2 {
      color: #333;
      margin-bottom: 20px;
    }

    .demo-card p {
      color: #666;
      line-height: 1.8;
      margin-bottom: 30px;
    }

    .demo-actions {
      display: flex;
      gap: 16px;
      flex-wrap: wrap;
    }

    .demo-btn {
      flex: 1;
      padding: 14px 24px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border: none;
      border-radius: 12px;
      color: white;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      min-width: 150px;
    }

    .demo-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
    }

    .demo-btn.secondary {
      background: rgba(102, 126, 234, 0.1);
      color: #667eea;
    }

    .info-box {
      background: #f8f9fa;
      border-left: 4px solid #667eea;
      padding: 16px;
      border-radius: 8px;
      margin-top: 20px;
    }

    .info-box h3 {
      color: #667eea;
      margin-bottom: 10px;
      font-size: 16px;
    }

    .info-box ul {
      list-style: none;
      padding-left: 0;
    }

    .info-box li {
      color: #666;
      padding: 8px 0;
      padding-left: 20px;
      position: relative;
    }

    .info-box li::before {
      content: 'âœ“';
      position: absolute;
      left: 0;
      color: #667eea;
      font-weight: bold;
    }

    .user-status {
      background: rgba(255, 255, 255, 0.2);
      padding: 12px 20px;
      border-radius: 8px;
      color: white;
      font-size: 14px;
    }
  </style>
</head>
<body class="theme-dark">
  
  <!-- Demo Header -->
  <header class="demo-header">
    <h1>ğŸ” Firebase Authentication Demo</h1>
    <div class="user-info">
      <button class="btn-login" onclick="window.firebaseAuth.showAuthModal()">ÄÄƒng nháº­p</button>
    </div>
  </header>

  <!-- Demo Content -->
  <div class="demo-content">
    <div class="demo-card">
      <h2>Há»‡ thá»‘ng Ä‘Äƒng nháº­p Firebase</h2>
      <p>
        BÃ¢y giá» dá»¯ liá»‡u phim Ä‘Ã£ lÆ°u sáº½ Ä‘Æ°á»£c lÆ°u trá»¯ trong tÃ i khoáº£n Firebase cá»§a báº¡n, 
        khÃ´ng bá»‹ máº¥t khi clear site data hoáº·c chuyá»ƒn thiáº¿t bá»‹.
      </p>

      <div class="demo-actions">
        <button class="demo-btn" onclick="window.firebaseAuth.showAuthModal('login')">
          ÄÄƒng nháº­p
        </button>
        <button class="demo-btn secondary" onclick="window.firebaseAuth.showAuthModal('register')">
          ÄÄƒng kÃ½
        </button>
      </div>

      <div class="info-box">
        <h3>âœ¨ TÃ­nh nÄƒng:</h3>
        <ul>
          <li>ÄÄƒng nháº­p/ÄÄƒng kÃ½ vá»›i Email & Password</li>
          <li>ÄÄƒng nháº­p nhanh vá»›i Google OAuth</li>
          <li>Dá»¯ liá»‡u khÃ´ng bá»‹ máº¥t khi clear browser data</li>
          <li>Äá»“ng bá»™ phim Ä‘Ã£ lÆ°u giá»¯a cÃ¡c thiáº¿t bá»‹</li>
          <li>Tá»± Ä‘á»™ng migrate dá»¯ liá»‡u cÅ© khi Ä‘Äƒng nháº­p</li>
        </ul>
      </div>

      <div id="auth-status" style="margin-top: 20px;"></div>
    </div>
  </div>

  <!-- Firebase SDK v8 -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>

  <!-- Firebase Config (THAY Báº°NG CONFIG Cá»¦A Báº N) -->
  <script>
    // Äá»c config tá»« firebase-config.js hoáº·c inline config
    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
      projectId: "YOUR_PROJECT_ID",
      storageBucket: "YOUR_PROJECT_ID.appspot.com",
      messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
      appId: "YOUR_APP_ID"
    };

    // Initialize Firebase
    if (!firebase.apps.length) {
      firebase.initializeApp(firebaseConfig);
    }

    // Mock movieComments for testing
    window.movieComments = {
      initialized: true,
      db: firebase.firestore()
    };
  </script>

  <!-- Firebase Auth System -->
  <script src="./firebase-auth.js"></script>
  <script src="./firebase-primary-storage.js"></script>

  <!-- Auth State Monitor -->
  <script>
    // Listen to auth state changes
    window.addEventListener('authStateChanged', (e) => {
      const user = e.detail.user;
      const statusEl = document.getElementById('auth-status');
      
      if (user) {
        statusEl.innerHTML = `
          <div style="background: #d4edda; border: 1px solid #c3e6cb; padding: 16px; border-radius: 8px; color: #155724;">
            <strong>âœ… ÄÄƒng nháº­p thÃ nh cÃ´ng!</strong><br>
            <small>Email: ${user.email}</small><br>
            <small>UID: ${user.uid}</small>
          </div>
        `;
      } else {
        statusEl.innerHTML = `
          <div style="background: #fff3cd; border: 1px solid #ffeaa7; padding: 16px; border-radius: 8px; color: #856404;">
            <strong>â„¹ï¸ ChÆ°a Ä‘Äƒng nháº­p</strong><br>
            <small>Vui lÃ²ng Ä‘Äƒng nháº­p Ä‘á»ƒ lÆ°u phim cá»§a báº¡n</small>
          </div>
        `;
      }
    });

    // Check storage info
    setInterval(async () => {
      if (window.FirebasePrimaryStorage && window.FirebasePrimaryStorage.initialized) {
        const info = await window.FirebasePrimaryStorage.getStorageInfo();
        console.log('ğŸ“Š Storage Info:', info);
      }
    }, 5000);
  </script>

</body>
</html>
